<template>
    <div id="pika-ride">
        <header>
            <nav
                class="container-md d-flex justify-content-between align-items-center"
            >
                <h3 id="go-back-btn" class="pointer">Go to HOME</h3>

                <div class="visualizer-container d-flex align-items-end"></div>
            </nav>
        </header>

        <main class="position-relative">
            <div class="custom-shape-edit-top"></div>
            <div class="custom-shape-divider-top-1669183005">
                <svg
                    data-name="Layer 1"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 1200 120"
                    preserveAspectRatio="none"
                >
                    <path
                        d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"
                        class="shape-fill"
                    ></path>
                </svg>
            </div>

            <svg id="paper-plane" viewBox="0 0 1445.000000 356.000000">
                <g
                    transform="translate(0.000000,356.000000) scale(0.100000,-0.100000)"
                    fill="#000000"
                    stroke="none"
                >
                    <path
                        class="paper-plane-path"
                        d="M9381 3390 c-30 -17 -84 -56 -120 -88 -183 -162 -785 -543 -1277
        -810 -198 -107 -589 -300 -774 -382 -91 -41 -175 -80 -187 -88 -26 -16 -47
        -73 -38 -102 13 -42 21 -44 486 -131 58 -10 215 -42 350 -70 134 -27 280 -57
        325 -65 44 -9 86 -19 93 -23 10 -7 7 -25 -12 -87 -39 -122 -68 -279 -74 -395
        -8 -155 -33 -144 392 -174 232 -16 222 -15 625 -50 441 -38 1017 -99 1423
        -150 302 -38 337 -43 652 -86 492 -67 1371 -211 1830 -299 283 -54 345 -64
        655 -100 96 -11 244 -34 328 -51 143 -29 154 -30 177 -15 37 24 45 83 18 122
        -5 6 -87 62 -183 124 -96 63 -269 175 -385 250 -115 75 -293 190 -394 255
        -102 66 -240 156 -308 200 -68 44 -198 129 -290 188 -93 60 -249 161 -349 225
        -99 64 -274 178 -389 252 -115 74 -290 188 -389 252 -100 64 -256 165 -349
        225 -192 124 -335 217 -667 433 -129 84 -288 187 -353 229 -257 166 -403 264
        -447 300 -56 46 -131 93 -190 120 -64 29 -114 26 -179 -9z m214 -204 c28 -13
        86 -52 131 -87 45 -35 140 -102 213 -149 72 -47 182 -118 244 -159 143 -94
        404 -263 622 -403 221 -142 502 -323 740 -478 105 -68 251 -162 325 -210 74
        -48 248 -160 385 -250 138 -89 302 -196 365 -237 260 -167 369 -238 377 -246
        9 -10 -26 3 -116 42 -69 30 -307 131 -521 221 -69 29 -172 73 -230 97 -103 44
        -252 107 -810 340 -466 196 -569 238 -1290 532 -300 122 -592 242 -650 265
        -58 24 -228 92 -377 152 -150 60 -273 111 -272 114 0 3 63 48 139 100 430 293
        516 351 544 364 46 23 123 20 181 -8z m-947 -602 c48 -20 314 -127 592 -239
        278 -112 633 -256 790 -320 157 -65 321 -132 365 -150 110 -45 749 -309 860
        -355 152 -64 286 -120 380 -160 50 -21 135 -57 190 -80 55 -23 141 -59 190
        -80 50 -21 133 -56 185 -78 350 -146 1246 -535 1255 -544 6 -7 6 -9 0 -5 -5 3
        -91 26 -190 52 -99 25 -232 60 -295 76 -722 188 -1466 372 -2230 549 -47 11
        -123 29 -170 40 -113 27 -439 101 -770 175 -510 115 -1350 293 -2004 426 -242
        49 -442 92 -445 95 -3 4 -1 8 5 11 44 15 437 209 604 298 191 101 509 279 555
        311 28 20 36 18 133 -22z m-108 -1015 c52 -11 158 -33 235 -49 77 -16 183 -39
        235 -50 52 -12 113 -25 135 -29 164 -35 635 -139 1025 -228 256 -58 503 -114
        550 -125 47 -10 130 -30 185 -43 307 -73 373 -89 505 -121 268 -65 835 -204
        874 -215 83 -22 20 -17 -180 16 -645 107 -1845 264 -2444 320 -91 8 -185 17
        -210 20 -124 14 -636 56 -867 71 -304 21 -273 2 -248 150 25 143 74 304 94
        304 9 0 59 -9 111 -21z"
                    />
                    <path
                        class="paper-plane-path"
                        d="M3665 3234 c-192 -28 -288 -56 -405 -120 -331 -181 -523 -545 -496
        -945 29 -455 301 -854 726 -1065 222 -110 410 -159 695 -179 50 -4 91 -8 92
        -9 2 -1 -28 -27 -65 -58 -225 -185 -543 -337 -880 -422 -460 -115 -942 -136
        -1387 -61 -602 102 -1035 349 -1300 740 -62 93 -156 287 -195 405 -92 280
        -137 607 -141 1020 -1 91 -5 175 -10 187 -9 25 -57 53 -89 53 -11 0 -33 -12
        -47 -26 l-26 -26 7 -211 c7 -216 9 -252 27 -437 86 -903 494 -1466 1262 -1744
        203 -73 393 -115 717 -157 115 -14 552 -20 670 -8 604 60 1085 234 1439 519
        96 78 170 146 226 209 l30 33 -107 -7 c-60 -4 -108 -4 -108 0 0 4 33 42 72 84
        l73 76 -205 6 c-132 4 -234 12 -285 23 -410 87 -708 289 -888 601 -216 375
        -188 823 70 1096 255 270 681 335 1048 160 235 -112 431 -353 510 -628 45
        -155 58 -261 51 -433 -6 -176 -25 -275 -81 -426 -48 -126 -74 -179 -144 -284
        -31 -47 -60 -91 -65 -99 -6 -10 0 -12 30 -8 22 3 68 9 103 13 l64 7 -23 -34
        c-13 -19 -41 -55 -62 -80 -21 -26 -38 -50 -38 -54 0 -11 105 2 245 30 230 46
        340 80 770 235 562 204 786 257 1126 267 298 9 506 -18 820 -106 43 -12 114
        -35 158 -51 98 -36 103 -36 136 -7 34 29 39 88 9 117 -25 25 -210 89 -384 133
        -239 61 -472 87 -720 82 -367 -9 -617 -67 -1200 -280 -250 -92 -467 -164 -585
        -195 -118 -31 -234 -54 -241 -47 -2 2 16 38 41 80 219 364 261 816 114 1232
        -143 407 -457 704 -823 780 -79 16 -274 27 -331 19z"
                    />
                </g>
            </svg>

            <h4 class="text-center relative-index-per-bg my-2 px-3">
                Let's play Pika Ride
            </h4>

            <section
                class="d-flex justify-content-center relative-index-per-bg"
            >
                <div id="game-container">
                    <div id="game">
                        <div id="pikachu-container">
                            <img
                                src="@/assets/projects/pikaride/img/pikachu-run-static-2.png"
                                id="pikachu"
                            />
                            <div id="cloud-text">
                                <img
                                    src="@/assets/projects/pikaride/img/cloud-comic.png"
                                />
                                <p>PIKA PIKA</p>
                            </div>

                            <div id="car">
                                <img
                                    src="@/assets/projects/pikaride/img/green_no_wheels-edit1.png"
                                    id="super-car"
                                />
                                <img
                                    src="@/assets/projects/pikaride/img/wheel.png"
                                    id="wheel-car-left"
                                />
                                <img
                                    src="@/assets/projects/pikaride/img/wheel.png"
                                    id="wheel-car-right"
                                />
                                <img
                                    src="@/assets/projects/pikaride/img/thug-glasses-edit.png"
                                    id="thug-life"
                                />
                                <img
                                    src="@/assets/projects/pikaride/img/fire-blue.gif"
                                    id="fire"
                                />
                            </div>
                        </div>
                        <img
                            src="@/assets/projects/pikaride/img/lighting-ball-pulse.gif"
                            id="lighting-ball"
                        />

                        <img
                            src="@/assets/projects/pikaride/img/tak-ur-ordrr-edit.png"
                            id="mcdonalds"
                        />
                        <img
                            src="@/assets/projects/pikaride/img/doodle-burger-1-cut.png"
                            id="burger"
                        />

                        <img
                            src="@/assets/projects/pikaride/img/blue-monster-flying.gif"
                            id="monster"
                        />

                        <div id="final-boss-container">
                            <img
                                src="@/assets/projects/pikaride/img/phoenix-rise_1620_ms.gif"
                                id="final-boss"
                            />
                        </div>
                        <img
                            src="@/assets/projects/pikaride/img/fireball-red.gif"
                            id="fire-ball"
                        />
                        <div id="final-boss-life"></div>

                        <img
                            src="@/assets/projects/pikaride/img/cute-star-1.png"
                            id="star"
                        />
                    </div>

                    <div
                        class="d-flex justify-content-center align-items-center mt-1"
                    >
                        <div class="btn-group">
                            <button
                                id="mobile-left"
                                type="button"
                                class="btn btn-secondary btn-lg px-4 py-3"
                            >
                                <i class="fa-solid fa-caret-left fa-lg"></i>
                            </button>
                            <button
                                id="mobile-right"
                                type="button"
                                class="btn btn-secondary btn-lg px-4 py-3"
                            >
                                <i class="fa-solid fa-caret-right fa-lg"></i>
                            </button>
                        </div>

                        <div class="mx-4">
                            <div class="btn-group">
                                <button
                                    id="mobile-supercar"
                                    type="button"
                                    class="btn btn-secondary px-3 py-2"
                                >
                                    <i class="fa-solid fa-car"></i>
                                </button>
                                <button
                                    id="mobile-supersaiyan"
                                    type="button"
                                    class="btn btn-secondary px-3 py-2"
                                >
                                    <i class="fa-solid fa-fire"></i>
                                </button>
                                <button
                                    id="mobile-attack"
                                    type="button"
                                    class="btn btn-secondary px-3 py-2"
                                >
                                    <i class="fa-solid fa-bolt"></i>
                                </button>
                            </div>
                            <button
                                id="mobile-instant-play"
                                type="button"
                                class="btn btn-secondary btn-sm px-3 py-2 ms-3"
                            >
                                <i class="fa-solid fa-play"></i>
                            </button>
                        </div>

                        <div class="btn-group">
                            <button
                                id="mobile-jump"
                                type="button"
                                class="btn btn-secondary btn-lg px-5 py-3"
                            >
                                JUMP
                            </button>
                        </div>
                    </div>

                    <div
                        id="score-container"
                        class="d-flex justify-content-between"
                    >
                        <div>
                            <div id="score"></div>
                            <div id="level"></div>
                        </div>
                        <div id="record"></div>
                        <div id="world-record"></div>
                    </div>

                    <div id="nickname-container">
                        <input
                            type="text"
                            id="nickname"
                            class="form-control"
                            placeholder="NICKNAME"
                            autocomplete="off"
                        />
                        <label for="nickname" class="form-label"
                            >Enter length: min 1 - max 3</label
                        >
                        <button
                            id="nickname-sender"
                            type="button"
                            class="btn btn-primary px-3 py-2 ms-3"
                        >
                            <i class="fa-solid fa-plane"></i>
                        </button>
                    </div>

                    <div
                        id="game-info-handle"
                        class="text-white bg-primary position-absolute d-flex justify-content-center align-items-center rounded-circle pointer"
                    >
                        <i class="fa-solid fa-info"></i>
                    </div>

                    <div
                        id="game-info-container"
                        class="position-absolute text-center text-white rounded py-2"
                    >
                        <p>
                            Enter your nickname to start the game.<br />
                            <span class="fst-italic"
                                >(mobile: just rotate your screen)</span
                            >
                        </p>
                        <p>
                            Press <span class="fw-bold">SPACE</span> to jump.
                            Press <span class="fw-bold">LEFT</span> and
                            <span class="fw-bold">RIGHT</span> to move.<br />
                            Press <span class="fw-bold">DOWN</span> for Super
                            Saiyan mode.<br />
                            Wen Lambo? Press <span class="fw-bold">UP</span> for
                            thug life, stonks.<br />
                            Get stars in level 3 and press
                            <span class="fw-bold">E</span> or
                            <span class="fw-bold">Y</span> for thunderbolt move.
                        </p>
                        <p class="mb-0">
                            Press <span class="fw-bold">ENTER</span> = Instant
                            play!
                        </p>

                        <div
                            id="game-info-btn"
                            class="text-white bg-primary position-absolute d-flex justify-content-center align-items-center rounded-circle pointer"
                        >
                            <i class="fa-solid fa-xmark"></i>
                        </div>
                    </div>
                </div>
            </section>

            <section class="relative-index-per-bg mt-3">
                <div class="d-flex justify-content-center align-items-center">
                    <button
                        id="pika-audio-btn"
                        class="btn btn-warning mx-2 d-flex align-items-center"
                    >
                        <span class="me-2">SoundFX</span
                        ><i class="fa-solid fa-music"></i>
                    </button>
                    <button
                        id="play-btn"
                        class="btn btn-success fs-5 mx-2 d-flex align-items-center"
                    >
                        <span class="me-2">PLAY!</span
                        ><i class="fa-solid fa-gamepad"></i>
                    </button>
                    <button
                        id="reset-btn"
                        class="btn btn-danger fs-5 mx-2 d-flex align-items-center"
                    >
                        <span class="me-2">reset</span
                        ><i class="fa-solid fa-rotate-right"></i>
                    </button>
                    <button
                        id="bg-music-btn"
                        class="btn btn-warning mx-2 d-flex align-items-center"
                    >
                        <span class="me-2">MusicBG</span
                        ><i class="fa-solid fa-music"></i>
                    </button>
                </div>

                <h4 class="text-center mt-2 px-3">...or just take a break</h4>

                <div id="food-truck-main" class="d-flex justify-content-center mt-0 mb-1">
                    <div id="food-truck-container" class="position-relative">
                        <img
                            src="@/assets/projects/pikaride/img/food-truck_edit-big-menu.png"
                            id="food-truck-container-img"
                        />

                        <div
                            id="truck-door-container"
                            class="position-absolute"
                        >
                            <div
                                id="truck-door-front"
                                class="position-absolute"
                            >
                                <div
                                    class="truck-door-window position-absolute"
                                ></div>
                                <img
                                    src="@/assets/projects/pikaride/img/food-truck-door-handle.png"
                                    class="position-absolute"
                                />
                            </div>

                            <div id="truck-door-back" class="position-absolute">
                                <div
                                    class="truck-door-window position-absolute"
                                ></div>
                            </div>
                        </div>

                        <img
                            id="truck-kitchen-part"
                            class="position-absolute"
                            src="@/assets/projects/pikaride/img/food-truck_kitchen-part-edit.png"
                        />

                        <div
                            id="best-score-container"
                            class="position-absolute text-white text-center"
                        >
                            <div class="mb-2 fx-bold">Best scores</div>
                            <div id="best-score-view" class="m-0"></div>
                        </div>

                        <img
                            id="pikachu-static"
                            class="position-absolute"
                            src="@/assets/projects/pikaride/img/pikachu-run-static-2.png"
                        />

                        <button
                            id="pika-food-btn"
                            class="btn btn-primary position-absolute"
                        >
                            BREAK
                        </button>
                    </div>
                </div>

                <div id="info-container">
                </div>
            </section>

            <div class="custom-shape-divider-bottom-1669183688">
                <svg
                    data-name="Layer 1"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 1200 120"
                    preserveAspectRatio="none"
                >
                    <path
                        d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"
                        class="shape-fill"
                    ></path>
                </svg>
            </div>
            <div class="custom-shape-edit-bottom"></div>
        </main>
    </div>
</template>

<script>
import { onMounted, onUnmounted } from 'vue';
import { pikarideModule } from '@/assets/projects/pikaride/js/pikaride.js';

export default {
    name: 'PikaRide',

    setup() {
        const bootstrapCSS = document.createElement('link');
        bootstrapCSS.rel = 'stylesheet';
        bootstrapCSS.id = 'bootstrapCSS';
        bootstrapCSS.href = `${__ASSETS_URL__}css/bootstrap.css`;
        document.head.appendChild(bootstrapCSS);

        const pikarideCSS = document.createElement('link');
        pikarideCSS.rel = 'stylesheet';
        pikarideCSS.id = 'pikarideCSS';
        pikarideCSS.href = `${__ASSETS_URL__}projects/pikaride/css/pikaride.css`;
        document.head.appendChild(pikarideCSS);

        // INIT
        document.title = "0xbrax | Pika Ride";

        onMounted(async () => {
            await pikarideModule();
        });
        onUnmounted(() => {
            // Wait for main-fade transition
            setTimeout(() => {
                bootstrapCSS.remove();
                pikarideCSS.remove();
            }, 1000);
        })
    },
};
</script>